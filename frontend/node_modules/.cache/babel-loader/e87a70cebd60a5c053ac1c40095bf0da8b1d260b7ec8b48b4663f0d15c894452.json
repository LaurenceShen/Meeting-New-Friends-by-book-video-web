{"ast":null,"code":"// 判斷是否藉由瀏覽器瀏覽\nexport const isBrowser = () => typeof window !== \"undefined\";\n\n// 從 LocalStorage 中取得使用者資訊，有的話就 Parse 這筆資訊。\nexport const getUser = () => isBrowser() && window.localStorage.getItem(\"gatsbyUser\") ? JSON.parse(window.localStorage.getItem(\"gatsbyUser\")) : {};\n\n// 用來登入成功後，設定資訊在 LocalStorage 中。\nconst setUser = user => window.localStorage.setItem(\"gatsbyUser\", JSON.stringify(user));\n\n// 處理登入，這邊使用 Hard Code 的方式驗證，此方式極度不安全，只是為了示範登入流程才用此方式，正式環境上會打 API 去跟後端確認資料是否正確，並等回傳結果後才會進行下一步\nexport const handleLogin = _ref => {\n  let {\n    username,\n    email\n  } = _ref;\n  return setUser({\n    username: username,\n    email: email\n  });\n};\n\n// 判斷使用者是否已經登入，如以登入就直接從 LocalStorage 中撈取使用者資料\nexport const isLoggedIn = () => {\n  const user = getUser();\n  return !!user.username;\n};\n\n// 登出，直接將使用者資料清空\nexport const logout = callback => {\n  setUser({});\n  callback();\n};","map":{"version":3,"names":["isBrowser","window","getUser","localStorage","getItem","JSON","parse","setUser","user","setItem","stringify","handleLogin","_ref","username","email","isLoggedIn","logout","callback"],"sources":["/home/jeff/Web/frontend/src/auth.js"],"sourcesContent":["// 判斷是否藉由瀏覽器瀏覽\nexport const isBrowser = () => typeof window !== \"undefined\"\n\n// 從 LocalStorage 中取得使用者資訊，有的話就 Parse 這筆資訊。\nexport const getUser = () =>\n  isBrowser() && window.localStorage.getItem(\"gatsbyUser\")\n    ? JSON.parse(window.localStorage.getItem(\"gatsbyUser\"))\n    : {}\n\n// 用來登入成功後，設定資訊在 LocalStorage 中。\nconst setUser = user =>\n  window.localStorage.setItem(\"gatsbyUser\", JSON.stringify(user))\n\n\n// 處理登入，這邊使用 Hard Code 的方式驗證，此方式極度不安全，只是為了示範登入流程才用此方式，正式環境上會打 API 去跟後端確認資料是否正確，並等回傳結果後才會進行下一步\nexport const handleLogin = ({ username, email }) => {\n    return setUser({\n      username: username,\n      email: email,\n    })\n}\n\n// 判斷使用者是否已經登入，如以登入就直接從 LocalStorage 中撈取使用者資料\nexport const isLoggedIn = () => {\n  const user = getUser()\n\n  return !!user.username\n}\n\n// 登出，直接將使用者資料清空\nexport const logout = callback => {\n  setUser({})\n  callback()\n}\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,SAAS,GAAGA,CAAA,KAAM,OAAOC,MAAM,KAAK,WAAW;;AAE5D;AACA,OAAO,MAAMC,OAAO,GAAGA,CAAA,KACrBF,SAAS,CAAC,CAAC,IAAIC,MAAM,CAACE,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,GACpDC,IAAI,CAACC,KAAK,CAACL,MAAM,CAACE,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,GACrD,CAAC,CAAC;;AAER;AACA,MAAMG,OAAO,GAAGC,IAAI,IAClBP,MAAM,CAACE,YAAY,CAACM,OAAO,CAAC,YAAY,EAAEJ,IAAI,CAACK,SAAS,CAACF,IAAI,CAAC,CAAC;;AAGjE;AACA,OAAO,MAAMG,WAAW,GAAGC,IAAA,IAAyB;EAAA,IAAxB;IAAEC,QAAQ;IAAEC;EAAM,CAAC,GAAAF,IAAA;EAC3C,OAAOL,OAAO,CAAC;IACbM,QAAQ,EAAEA,QAAQ;IAClBC,KAAK,EAAEA;EACT,CAAC,CAAC;AACN,CAAC;;AAED;AACA,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAC9B,MAAMP,IAAI,GAAGN,OAAO,CAAC,CAAC;EAEtB,OAAO,CAAC,CAACM,IAAI,CAACK,QAAQ;AACxB,CAAC;;AAED;AACA,OAAO,MAAMG,MAAM,GAAGC,QAAQ,IAAI;EAChCV,OAAO,CAAC,CAAC,CAAC,CAAC;EACXU,QAAQ,CAAC,CAAC;AACZ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}